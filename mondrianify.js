"use strict";(function(){function a(a){if("string"!=typeof a||!e.test(a))return{r:0,g:0,b:0,a:0};const b=e.exec(a);return{r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:typeof b[3]===void 0?1:parseFloat(b[3])}}function b(b){return 0===a(b).a}function c(a){const[b]=a,c=document.createElement("canvas");c.style="position:absolute;top:0;left:0;z-index:1000000;",c.width=b.rect.width,c.height=b.rect.height,document.body.appendChild(c);const e=c.getContext("2d");a.forEach(a=>{e.globalAlpha=a.type===d.BODY?1:.5,e.fillStyle=a.fill,e.fillRect(a.rect.x,a.rect.y,a.rect.width,a.rect.height)})}const d={ELEMENT:"ELEMENT",BODY:"BODY",TEXT:"TEXT",COMMENT:"COMMENT"},e=/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*((?:\d*\.)?\d+))?\)/;(function(){function a(c,f={}){function g(){const a=getComputedStyle(c),b=a.getPropertyValue("color"),d=a.getPropertyValue("background-color"),e=a.getPropertyValue("border-color"),f=a.getPropertyValue("border-width");j="undefined"==typeof b?j:b,k="undefined"==typeof d?k:d,l="undefined"==typeof e?l:e,m="undefined"==typeof f?m:f}let h=d.ELEMENT,{rect:i,color:j,backgroundColor:k,borderColor:l,borderWidth:m,fill:n}=f;switch(c.constructor){case HTMLBodyElement.prototype.constructor:i={x:0,y:0,top:0,bottom:document.documentElement.scrollHeight,left:0,right:document.documentElement.scrollWidth,width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight},g(),b(k)&&(k="rgb(255, 255, 255)"),h=d.BODY,n=k;break;case Text.prototype.constructor:const a=document.createRange();a.selectNodeContents(c),i=a.getBoundingClientRect(),h=d.TEXT,n=j;break;case Comment.prototype.constructor:i={x:0,y:0,top:0,left:0,right:0,bottom:0,width:0,height:0},h=d.COMMENT;break;default:try{i=c.getBoundingClientRect()}catch(a){console.error(a),console.info(c.__proto__)}g(),n=k;}const o={type:h,node:c,rect:i,color:j,backgroundColor:k,borderColor:l,borderWidth:m,fill:n};e.push(o),c.type!==d.TEXT&&c.childNodes.forEach(b=>{a(b,o)})}const e=[];a(document.body),c(e),console.log("Mondrianify nodes",e)})()})();
